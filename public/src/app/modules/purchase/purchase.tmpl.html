<div content-for="title">
  <span>Покупки</span>
</div>

<div class="scrollable" ng-controller="PurchaseController">
  <div class="scrollable-content">
   <form name="PurchaseForm" novalidate ng-submit="submit()">
       <div bs-panel title="Фильтрация">
           <input bs-form-control ng-model="startDate" label="C" label-class="col-xs-3 col-sm-2 col-lg-1 text-center" class="col-xs-9 col-sm-10 col-lg-11" />
           <input bs-form-control type="date" ng-model="endDate" label="По" label-class="col-xs-3 col-sm-2 col-lg-1 text-center" class="col-xs-9 col-sm-10 col-lg-11" />
           <input type="submit" value="Показать" class="btn btn-primary center-block" ng-disabled="PurchaseForm.$invalid">
       </div>
    </form>
    <div class="table-container">
    <!-- st-safe-src="rowCollection" - to add sorting, but some error wit infinitive loop-->
		<table st-table="displayedCollection" st-safe-src="rowCollection" class="table table-striped table-responsive">
			<thead>
				<tr>
					<th lr-drag-src="headers" lr-drop-target="headers" ng-repeat="col in columns" st-sort="{{col}}">{{col}}</th>
				</tr>
			</thead>	
			<tbody>
				<tr ng-repeat="row in displayedCollection">
					<td ng-repeat="col in columns">{{row[col]}}</td>
				</tr>
			</tbody>
		</table>

        <br/>Количество покупок по карте : {{count}}
        <br/>Сумма покупок по карте: {{sum}}

	</div>

	<div ng-show="isLoading" class="loading-indicator"></div>
  </div>
</div>